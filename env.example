# ==============================================
# n8n Railway Deployment - Environment Variables
# ==============================================
# Copy this file and configure the values according to your Railway deployment
# DO NOT commit the actual .env file with real credentials

# ----------------------------------------------
# n8n Host Configuration
# ----------------------------------------------
# The external URL where n8n will be accessible
# Replace with your Railway-provided domain (e.g., n8n-production.up.railway.app)
N8N_HOST=your-app-name.up.railway.app

# Protocol (use https in production)
N8N_PROTOCOL=https

# Port n8n listens on (Railway will map this internally)
N8N_PORT=5678

# ----------------------------------------------
# PostgreSQL Database Configuration
# ----------------------------------------------
# Railway provides these automatically when you attach a PostgreSQL service
# You can reference them directly in Railway's environment variables tab

# Database type (always postgres for Railway)
DB_TYPE=postgresdb

# Connection parameters - map Railway's PG variables to n8n format
# In Railway, use: ${PGHOST}, ${PGPORT}, ${PGDATABASE}, ${PGUSER}, ${PGPASSWORD}
DB_POSTGRESDB_HOST=${PGHOST}
DB_POSTGRESDB_PORT=${PGPORT}
DB_POSTGRESDB_DATABASE=${PGDATABASE}
DB_POSTGRESDB_USER=${PGUSER}
DB_POSTGRESDB_PASSWORD=${PGPASSWORD}

# Optional: Use DATABASE_URL instead (Railway provides this automatically)
# If using DATABASE_URL, you don't need the individual DB_POSTGRESDB_* variables above
# DB_POSTGRESDB_URL=${DATABASE_URL}

# ----------------------------------------------
# Security & Authentication
# ----------------------------------------------
# Encryption key for credentials stored in database (REQUIRED for production)
# Generate a random key: openssl rand -hex 32
N8N_ENCRYPTION_KEY=your-encryption-key-here-change-this

# Basic authentication (recommended for initial setup)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=change-this-password

# ----------------------------------------------
# Webhook Configuration
# ----------------------------------------------
# URL for webhooks (should match N8N_HOST with protocol)
WEBHOOK_URL=https://your-app-name.up.railway.app

# ----------------------------------------------
# Optional: Execution Configuration
# ----------------------------------------------
# Execution mode: regular or queue (queue requires Redis)
# EXECUTIONS_MODE=regular

# Execution timeout in seconds
# EXECUTIONS_TIMEOUT=300

# Maximum execution timeout
# EXECUTIONS_TIMEOUT_MAX=3600

# ----------------------------------------------
# Optional: Timezone
# ----------------------------------------------
# Set timezone for scheduled workflows
# GENERIC_TIMEZONE=Europe/Copenhagen

# ----------------------------------------------
# Optional: Logging
# ----------------------------------------------
# Log level: info, warn, error, verbose, debug
# N8N_LOG_LEVEL=info

# Log output format
# N8N_LOG_OUTPUT=console

# ----------------------------------------------
# Optional: Email Configuration (SMTP)
# ----------------------------------------------
# N8N_EMAIL_MODE=smtp
# N8N_SMTP_HOST=smtp.gmail.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=your-email@gmail.com
# N8N_SMTP_PASS=your-app-password
# N8N_SMTP_SENDER=your-email@gmail.com

# ----------------------------------------------
# Data Persistence
# ----------------------------------------------
# n8n stores data in /home/node/.n8n
# Mount a Railway volume to this path for persistence
# This is configured in Railway's volume settings, not here

# ==============================================
# External Services API Keys (for TikTok Workflow)
# ==============================================
# These are needed if you're using the TikTok Auto Story workflow
# See CREDENTIALS.md for detailed setup instructions

# ----------------------------------------------
# OpenAI API (Required for story generation)
# ----------------------------------------------
# Get from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------
# Reddit API (Required for story seeds)
# ----------------------------------------------
# Get from: https://www.reddit.com/prefs/apps
# REDDIT_CLIENT_ID=your_14_char_id
# REDDIT_CLIENT_SECRET=your_secret_key
# REDDIT_USER_AGENT=TikTokStoryBot/1.0

# ----------------------------------------------
# Text-to-Speech (Choose one)
# ----------------------------------------------
# Option A: ElevenLabs (best quality)
# Get from: https://elevenlabs.io/app/settings/api-keys
# ELEVENLABS_API_KEY=your_api_key
# ELEVENLABS_VOICE_ID=21m00Tcm4TlvDq8ikWAM

# Option B: OpenAI TTS (uses same OPENAI_API_KEY above)
# No additional key needed

# Option C: Coqui TTS (self-hosted, no API key needed)
# No additional key needed

# ----------------------------------------------
# Video Generation (Choose one)
# ----------------------------------------------
# Option A: RunPod
# Get from: https://runpod.io/console/user/settings
# RUNPOD_API_KEY=your_api_key
# RUNPOD_ENDPOINT_ID=your_endpoint_id

# Option B: Replicate
# Get from: https://replicate.com/account/api-tokens
# REPLICATE_API_TOKEN=r8_xxxxxxxxxxxxxxxxxxxxx

# Option C: Self-hosted ComfyUI (no API key needed)
# No additional key needed

# ----------------------------------------------
# TikTok Upload (Choose one)
# ----------------------------------------------
# Option A: TikTok API (requires approval)
# Get from: https://developers.tiktok.com
# TIKTOK_CLIENT_KEY=your_client_key
# TIKTOK_CLIENT_SECRET=your_client_secret
# TIKTOK_ACCESS_TOKEN=your_access_token

# Option B: AWS S3 (for manual upload)
# Get from: https://aws.amazon.com/console/
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_S3_BUCKET=tiktok-videos
# AWS_REGION=eu-west-1

# Option C: Cloudflare R2 (cheaper alternative to S3)
# Get from: https://dash.cloudflare.com/
# R2_ACCESS_KEY_ID=your_access_key
# R2_SECRET_ACCESS_KEY=your_secret_key
# R2_BUCKET_NAME=tiktok-videos
# R2_ACCOUNT_ID=your_account_id

# ----------------------------------------------
# Service URLs (FastAPI services for TikTok workflow)
# ----------------------------------------------
# Update these with your deployed Railway service URLs
# STORY_SERVICE_URL=https://story-service.up.railway.app
# VOICE_SERVICE_URL=https://voice-service.up.railway.app
# VIDEO_SERVICE_URL=https://video-service.up.railway.app
# ASSEMBLY_SERVICE_URL=https://assembly-service.up.railway.app
# TIKTOK_UPLOAD_SERVICE_URL=https://tiktok-upload.up.railway.app
